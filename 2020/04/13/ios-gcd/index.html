<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-TW">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="iOS," />










<meta name="description" content="é€™ç³»åˆ—ç­†è¨˜ï¼Œæ›¿è‡ªå·±ç´€éŒ„iOSé¢è©¦å¸¸å•è€ƒé¡Œã€‚ GCD(Grand Central Dispatch)æ˜¯æ“ä½œthreadçš„APIï¼ŒDispatchQueueæä¾›global queueè·Ÿè‡ªè¨‚queueï¼Œè¨‚å®šåˆå¯åˆ†ç‚ºqueueé¡å‹(Serialæˆ–Concurrent)è·ŸåŒæ­¥æ€§(Syncæˆ–Async)ã€‚ThreadåŸ·è¡Œé †åºå‰‡è·ŸQuality of service(QoS)æœ‰é—œä¿‚ï¼Œä¾æ“šå„ªå…ˆé †åºåˆ†ç‚ºuserI">
<meta property="og:type" content="article">
<meta property="og:title" content="èªªæ˜GCD">
<meta property="og:url" content="https://bing-guo.github.io/2020/04/13/ios-gcd/index.html">
<meta property="og:site_name" content="Bingçš„éš¨ç­†ç´€éŒ„">
<meta property="og:description" content="é€™ç³»åˆ—ç­†è¨˜ï¼Œæ›¿è‡ªå·±ç´€éŒ„iOSé¢è©¦å¸¸å•è€ƒé¡Œã€‚ GCD(Grand Central Dispatch)æ˜¯æ“ä½œthreadçš„APIï¼ŒDispatchQueueæä¾›global queueè·Ÿè‡ªè¨‚queueï¼Œè¨‚å®šåˆå¯åˆ†ç‚ºqueueé¡å‹(Serialæˆ–Concurrent)è·ŸåŒæ­¥æ€§(Syncæˆ–Async)ã€‚ThreadåŸ·è¡Œé †åºå‰‡è·ŸQuality of service(QoS)æœ‰é—œä¿‚ï¼Œä¾æ“šå„ªå…ˆé †åºåˆ†ç‚ºuserI">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2020-04-13T06:49:33.000Z">
<meta property="article:modified_time" content="2020-04-15T07:23:40.842Z">
<meta property="article:author" content="Bing">
<meta property="article:tag" content="iOS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bing-Guo.github.io/2020/04/13/ios-gcd/"/>





  <title>èªªæ˜GCD | Bingçš„éš¨ç­†ç´€éŒ„</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-TW">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Bingçš„éš¨ç­†ç´€éŒ„</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">è¨˜éŒ„æŠ€è¡“ç­†è¨˜ã€è·æ¶¯ã€å¿ƒæƒ…çš„åœ°æ–¹</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://bing-Guo.github.io/2020/04/13/ios-gcd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bingçš„éš¨ç­†ç´€éŒ„">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">èªªæ˜GCD</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-13T14:49:33+08:00">
                2020-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%A9%A6%E8%80%83%E9%A1%8C/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è©¦è€ƒé¡Œ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>é€™ç³»åˆ—ç­†è¨˜ï¼Œæ›¿è‡ªå·±ç´€éŒ„iOSé¢è©¦å¸¸å•è€ƒé¡Œã€‚</p>
<p>GCD(Grand Central Dispatch)æ˜¯æ“ä½œthreadçš„APIï¼ŒDispatchQueueæä¾›global queueè·Ÿè‡ªè¨‚queueï¼Œè¨‚å®šåˆå¯åˆ†ç‚ºqueueé¡å‹(Serialæˆ–Concurrent)è·ŸåŒæ­¥æ€§(Syncæˆ–Async)ã€‚<br>ThreadåŸ·è¡Œé †åºå‰‡è·ŸQuality of service(QoS)æœ‰é—œä¿‚ï¼Œä¾æ“šå„ªå…ˆé †åºåˆ†ç‚ºuserInteractive &gt; userInteractive &gt; default &gt; utility &gt; background &gt; unspecified</p>
<a id="more"></a>

<h1 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h1><p>GCDæ“ä½œthreadçš„èªæ³•å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let queue &#x3D; DispatchQueue(label: &quot;myQueue&quot;, qos: .userInteractive, attributes: .concurrent)</span><br></pre></td></tr></table></figure>
<ul>
<li>qosè¡¨ç¤ºå„ªå…ˆé †åºï¼Œé è¨­default</li>
<li>attributesè¡¨ç¤ºconcurrentæˆ–serialï¼Œé è¨­serial</li>
</ul>
<h2 id="serialQueue-sync"><a href="#serialQueue-sync" class="headerlink" title="serialQueue + sync"></a>serialQueue + sync</h2><p>ç”¨æ–¼ä¾åºåŸ·è¡Œä»»å‹™ï¼Œä¸æœƒé–‹æ–°çš„thread</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let serialQueue: DispatchQueue &#x3D; DispatchQueue(label: &quot;serialQueue&quot;)</span><br><span class="line"></span><br><span class="line">serialQueue.sync &#123;</span><br><span class="line">    for i in 1 ... 10 &#123;</span><br><span class="line">        print(&quot;ğŸŒ \(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for j in 11 ... 20 &#123;</span><br><span class="line">    print(&quot;ğŸŒœ \(j)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="concurrentQueue-async"><a href="#concurrentQueue-async" class="headerlink" title="concurrentQueue + async"></a>concurrentQueue + async</h2><p>ç”¨æ–¼åŒæ™‚åŸ·è¡Œå¾ˆå¤šä»»å‹™ï¼Œæœƒé–‹æ–°çš„thread</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let concurrentQueue: DispatchQueue &#x3D; DispatchQueue(label: &quot;CorrentQueue&quot;, attributes: .concurrent)</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    for i in 1 ... 10 &#123;</span><br><span class="line">        print(&quot;ğŸŒ \(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    for j in 1 ... 10 &#123;</span><br><span class="line">        print(&quot;ğŸŒœ \(j)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">concurrentQueue.async &#123;</span><br><span class="line">    for k in 1 ... 10 &#123;</span><br><span class="line">        print(&quot;â„ï¸ \(j)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è£œå……ï¼šè§£é‡‹-Synchronous-amp-Asynchronous-çš„å·®åˆ¥"><a href="#è£œå……ï¼šè§£é‡‹-Synchronous-amp-Asynchronous-çš„å·®åˆ¥" class="headerlink" title="è£œå……ï¼šè§£é‡‹ Synchronous &amp; Asynchronous çš„å·®åˆ¥"></a>è£œå……ï¼šè§£é‡‹ Synchronous &amp; Asynchronous çš„å·®åˆ¥</h3><ul>
<li>å®šç¾©ï¼šAsyncè·ŸSyncå·®åˆ¥ï¼Œç™¼é€éœ€æ±‚å¾Œï¼Œéœ€ä¸éœ€è¦ç­‰åˆ°å®Œæˆæ‰èƒ½å¯ä»¥åŸ·è¡Œå…¶ä»–äº‹æƒ…ã€‚</li>
<li>èˆ‰ä¾‹ï¼šAsyncå°±å¥½åƒä½ å»è²·éº¥ç•¶å‹ï¼Œé»å¥½é¤ï¼Œä»–å«ä¾è™Ÿç¢¼å«è™Ÿ(é¤åšå¥½åœ¨å«ä½ )ï¼ŒSyncå°±æ˜¯ä½ åœ¨é‚£é‚Šç­‰åˆ°é¤åšå®Œï¼Œæ‹¿å®Œåœ¨èµ°ã€‚</li>
<li>å¯¦ä½œï¼šå°±æ˜¯æœ‰æ²’æœ‰muti-thread</li>
</ul>
<h3 id="è£œå……ï¼šè§£é‡‹-Serial-amp-Concurrent-çš„å·®åˆ¥"><a href="#è£œå……ï¼šè§£é‡‹-Serial-amp-Concurrent-çš„å·®åˆ¥" class="headerlink" title="è£œå……ï¼šè§£é‡‹ Serial &amp; Concurrent çš„å·®åˆ¥"></a>è£œå……ï¼šè§£é‡‹ Serial &amp; Concurrent çš„å·®åˆ¥</h3><ul>
<li>Serial Queuesæœƒç…§é †åºåŸ·è¡Œï¼Œä¸¦ç­‰åˆ°ä¸Šä¸€å€‹ä»»å‹™çµæŸæ‰æœƒé–‹å§‹(FIFO)ï¼Œé©åˆè™•ç†å…±äº«è³‡æºï¼Œç¢ºä¿å­˜å–æ˜¯ç…§é †åºçš„</li>
<li>Concurrent Queuesæœƒç…§é †åºåŸ·è¡Œï¼Œä½†ä¸å¿…ç­‰åˆ°ä¸Šä¸€å€‹ä»»å‹™çµæŸæ‰é–‹å§‹ï¼Œå› æ­¤æ¯å€‹ä»»å‹™çš„çµæŸæ™‚é–“æ˜¯ä¸å¯é æ¸¬çš„</li>
</ul>
<h3 id="è£œå……ï¼šè§£é‡‹-Concurrency-v-s-Serial-v-s-Parallellism"><a href="#è£œå……ï¼šè§£é‡‹-Concurrency-v-s-Serial-v-s-Parallellism" class="headerlink" title="è£œå……ï¼šè§£é‡‹ Concurrency v.s Serial v.s. Parallellism"></a>è£œå……ï¼šè§£é‡‹ Concurrency v.s Serial v.s. Parallellism</h3><p>ä»¥åšèœä¾†çœ‹ï¼Œä¸€å€‹å»šå¸«è¦åšèœ</p>
<ul>
<li>serialå°±æ˜¯ï¼Œä»–è¦å…ˆæ´—èœã€æ´—å®Œåœ¨åˆ‡èœã€åˆ‡å®Œåœ¨æº–å‚™é†¬æ–™ã€æº–å‚™å®Œåœ¨ç‡’æ°´ã€ç‡’å®Œåœ¨ç…®éºµã€ç…®å®Œé¢åœ¨æº–å‚™ç¢—ç›¤ã€æº–å‚™å®Œåœ¨æ“ºç›¤ï¼Œé€™æ¨£è¦ç­‰å¾…ä¸Šä¸€å€‹å‹•ä½œå®Œæˆï¼Œæ‰èƒ½åŸ·è¡Œä¸‹ä¸€å€‹ä»»å‹™</li>
<li>concurrencyæ˜¯ï¼Œä¸€å€‹å»šå¸«ï¼Œä»–é‚„æ˜¯å¯ä»¥åœ¨åŒæ™‚é–“å®Œæˆæ´—èœã€åˆ‡èœã€æº–å‚™é†¬æ–™â€¦ç­‰ç­‰å·¥ä½œï¼Œä»–æœƒåœ¨ä¸­é–“åˆ‡æ›ä¾†åˆ‡æ›å»ï¼Œä¸ç”¨ç­‰å¾…ä¸Šä¸€å€‹å‹•ä½œå®Œæˆï¼Œæ‰èƒ½åšä¸‹ä¸€å€‹å‹•ä½œ</li>
<li>Parallellism æ¯”è¼ƒåƒæ˜¯åŒæ™‚æœ‰å¾ˆå¤šå»šå¸«åœ¨åšå·®ä¸å¤šäº‹æƒ…</li>
</ul>
<h1 id="Quality-of-service-QoS"><a href="#Quality-of-service-QoS" class="headerlink" title="Quality of service(QoS)"></a>Quality of service(QoS)</h1><p>ä¾æ“šå„ªå…ˆé †åºåˆ†ç‚ºuserInteractive &gt; userInteractive &gt; default &gt; utility &gt; background &gt; unspecifiedï¼Œåœ¨asyncçš„æƒ…å¢ƒä¸‹</p>
<ul>
<li>å¦‚æœå„ªå…ˆé †åºä¸åŒï¼Œå‰‡å„ªå…ˆçš„æœƒå…ˆè¢«è™•ç†</li>
<li>å¦‚æœå„ªå…ˆé †åºç›¸åŒï¼Œå‰‡æœƒè¼ªæµåŸ·è¡Œä»»å‹™</li>
<li>å¦‚æœæ˜¯main queueè·ŸuserInteractiveç›¸æ¯”ï¼Œmain queueæœƒå„ªå…ˆè¢«è™•ç†</li>
</ul>
<h1 id="Global"><a href="#Global" class="headerlink" title="Global"></a>Global</h1><p>é™¤äº†è‡ªå·±å®šç¾©queueï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç³»çµ±å®šç¾©å¥½äº†global queueï¼Œé è¨­æ˜¯concurrent queueï¼Œå¯ä»¥èª¿ç”¨qosè·Ÿsyncæˆ–async</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let queue &#x3D; DispatchQueue.global(qos: .background)</span><br><span class="line">queue.async&#123;</span><br><span class="line">    for i in 0...10&#123;</span><br><span class="line">        print(&quot;ğŸŒ \(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åƒæ˜¯main queueï¼ŒDispatchQueueä¹Ÿå¹«æˆ‘å€‘æº–å‚™å¥½äº†ï¼Œmain queueä¸»è¦ç”¨ä¾†æ›´æ–°ç•«é¢UI</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DispatchQueue.main.async &#123;</span><br><span class="line">    &#x2F;&#x2F; Do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è£œå……èªªæ˜ï¼ŒUIåªèƒ½æ”¾åœ¨mainåŸ·è¡ŒçºŒåŸ·è¡Œï¼Œå¦‚æœä½ åœ¨background threadæ“ä½œuiï¼Œå› ç‚ºpriolityé—œä¿‚ï¼Œä½ æœƒä¸çŸ¥é“ä»€éº¼æ™‚å€™æ‰æœƒæ›´æ–°uiï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯ï¼Œå‡è¨­ä½ åœ¨backgroup threadä¸‹è¼‰åœ–ç‰‡ï¼Œä½†æŠŠæ›´æ–°ç•«é¢çš„äº‹æƒ…çµ±ä¸€åœ¨main threadåš</p>
<h1 id="Dispatch-Group"><a href="#Dispatch-Group" class="headerlink" title="Dispatch Group"></a>Dispatch Group</h1><p>å¦‚æœè¦ç­‰å¾…ä¸€å€‹ä»¥ä¸Šçš„ä»»å‹™å®Œæˆï¼Œæ¥è‘—åœ¨å»åŸ·è¡Œå…¶ä»–äº‹æƒ…ï¼Œé‚£å°±è¦ç”¨dispatch groupä½œç‚ºç­‰å¾…æ©Ÿåˆ¶ï¼Œç­‰ä¸€æ•´å€‹groupå®Œæˆä¸€èµ·åŸ·è¡Œå…¶ä»–ä»»å‹™ã€‚</p>
<h2 id="ä»»å‹™éå­åŸ·è¡Œç·’"><a href="#ä»»å‹™éå­åŸ·è¡Œç·’" class="headerlink" title="ä»»å‹™éå­åŸ·è¡Œç·’"></a>ä»»å‹™éå­åŸ·è¡Œç·’</h2><p>queue.asyncåŠ å…¥groupï¼Œä¸¦åœ¨æœ€å¾ŒçµæŸæ™‚ï¼Œå‘¼å«group.notifyä¾†ç¢ºä¿éƒ½å®Œæˆå¾Œï¼Œåœ¨åŸ·è¡Œä¸‹ä¸€å€‹ä»»å‹™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">let group: DispatchGroup &#x3D; DispatchGroup()</span><br><span class="line"></span><br><span class="line">let queue1 &#x3D; DispatchQueue(label: &quot;queue1&quot;, attributes: .concurrent)</span><br><span class="line">queue1.async(group: group) &#123;</span><br><span class="line">    for i in 1 ... 10 &#123;</span><br><span class="line">        print(&quot;ğŸŒ \(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let queue2 &#x3D; DispatchQueue(label: &quot;queue2&quot;, attributes: .concurrent)</span><br><span class="line">queue2.async(group: group) &#123;</span><br><span class="line">    for j in 11 ... 20 &#123;</span><br><span class="line">        print(&quot;ğŸŒœ \(j)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">group.notify(queue: DispatchQueue.main) &#123; </span><br><span class="line">    print(&quot;è™•ç†å®Œæˆä»»å‹™Aå’Œä»»å‹™B...&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="WorkItem"><a href="#WorkItem" class="headerlink" title="WorkItem"></a>WorkItem</h1><p>DispatchWorkItemåƒæ˜¯ä¸€å€‹ä»£ç¢¼å€å¡Šï¼Œå¯ä»¥åœ¨queueè¢«èª¿ç”¨ï¼Œé€™æ¨£å¯«æ³•åˆæ›´ç°¡æ½”äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let queue: DispatchQueue &#x3D; DispatchQueue(label: &quot;myQueue&quot;)</span><br><span class="line"></span><br><span class="line">let workItem &#x3D; DispatchWorkItem &#123;</span><br><span class="line">    for i in 1 ... 10 &#123;</span><br><span class="line">        print(&quot;ğŸŒ \(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">queue.async(execute: workItem)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; or</span><br><span class="line"></span><br><span class="line">queue.async &#123;</span><br><span class="line">    workItem.perform()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä»»å‹™æ˜¯å­åŸ·è¡Œç·’"><a href="#ä»»å‹™æ˜¯å­åŸ·è¡Œç·’" class="headerlink" title="ä»»å‹™æ˜¯å­åŸ·è¡Œç·’"></a>ä»»å‹™æ˜¯å­åŸ·è¡Œç·’</h2><p>å› ç‚ºä»»å‹™åˆæ˜¯å¦ä¸€å€‹åŸ·è¡Œç·’ï¼Œæ¯”å¦‚èªªCallå¾Œç«¯çš„APIï¼Œéœ€è¦æ˜ç¢ºæŒ‡å‡ºgroupé–‹å§‹èˆ‡çµæŸæ™‚é–“é»ï¼Œæ‰€ä»¥ç”¨group.enter()è·Ÿgroup.leave()ä¾†ç´€éŒ„æ¯å€‹queueé–‹å§‹è·ŸçµæŸï¼Œæœ€å¾Œï¼Œå‘¼å«group.notifyä¾†ç¢ºä¿éƒ½å®Œæˆå¾Œï¼Œåœ¨åŸ·è¡Œä¸‹ä¸€å€‹ä»»å‹™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let group: DispatchGroup &#x3D; DispatchGroup()</span><br><span class="line">                </span><br><span class="line">let queue1 &#x3D; DispatchQueue(label: &quot;queue1&quot;, attributes: .concurrent)</span><br><span class="line">group.enter()</span><br><span class="line">queue1.async(group: group) &#123;</span><br><span class="line">	print(&quot;Call backend API&quot;)</span><br><span class="line">	group.leave()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let queue2 &#x3D; DispatchQueue(label: &quot;queue2&quot;, attributes: .concurrent)</span><br><span class="line">group.enter()</span><br><span class="line">queue2.async(group: group) &#123;</span><br><span class="line">	print(&quot;Call backend API&quot;)</span><br><span class="line">	group.leave()</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">group.notify(queue: DispatchQueue.main) &#123;</span><br><span class="line">	print(&quot;å®Œæˆæ‰€æœ‰ Call å¾Œç«¯ API çš„å‹•ä½œ...&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="åƒè€ƒæ–‡ä»¶"><a href="#åƒè€ƒæ–‡ä»¶" class="headerlink" title="åƒè€ƒæ–‡ä»¶"></a>åƒè€ƒæ–‡ä»¶</h1><ol>
<li><a href="https://www.appcoda.com.tw/grand-central-dispatch/" target="_blank" rel="noopener">APPCODA - Swift 3å­¸ç¿’æŒ‡å—ï¼šé‡æ–°èªè­˜GCDæ‡‰ç”¨</a></li>
<li><a href="https://medium.com/@mikru168/ios-gcd%E5%A4%9A%E5%9F%B7%E8%A1%8C%E7%B7%92%E7%9A%84%E8%AA%AA%E6%98%8E%E8%88%87%E6%87%89%E7%94%A8-c69a68d01da1" target="_blank" rel="noopener">æ³•è˜­å…‹çš„iOSä¸–ç•Œ -ã€iOS - GCD å¤šåŸ·è¡Œç·’çš„èªªæ˜èˆ‡æ‡‰ç”¨ã€‘</a></li>
<li><a href="https://kkc.github.io/2017/09/01/asynchronous-programming/" target="_blank" rel="noopener">æ·ºè«‡ Asynchronous Programming - Kakashiâ€™s Blog</a></li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/13/ios-access-level/" rel="next" title="èªªæ˜Access Level">
                <i class="fa fa-chevron-left"></i> èªªæ˜Access Level
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/13/interview-1/" rel="prev" title="2020 - iOSé¢è©¦ç¶“é©—(ä¸Š)">
                2020 - iOSé¢è©¦ç¶“é©—(ä¸Š) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Bing</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Queue"><span class="nav-number">1.</span> <span class="nav-text">Queue</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#serialQueue-sync"><span class="nav-number">1.1.</span> <span class="nav-text">serialQueue + sync</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#concurrentQueue-async"><span class="nav-number">1.2.</span> <span class="nav-text">concurrentQueue + async</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è£œå……ï¼šè§£é‡‹-Synchronous-amp-Asynchronous-çš„å·®åˆ¥"><span class="nav-number">1.2.1.</span> <span class="nav-text">è£œå……ï¼šè§£é‡‹ Synchronous &amp; Asynchronous çš„å·®åˆ¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è£œå……ï¼šè§£é‡‹-Serial-amp-Concurrent-çš„å·®åˆ¥"><span class="nav-number">1.2.2.</span> <span class="nav-text">è£œå……ï¼šè§£é‡‹ Serial &amp; Concurrent çš„å·®åˆ¥</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è£œå……ï¼šè§£é‡‹-Concurrency-v-s-Serial-v-s-Parallellism"><span class="nav-number">1.2.3.</span> <span class="nav-text">è£œå……ï¼šè§£é‡‹ Concurrency v.s Serial v.s. Parallellism</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Quality-of-service-QoS"><span class="nav-number">2.</span> <span class="nav-text">Quality of service(QoS)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Global"><span class="nav-number">3.</span> <span class="nav-text">Global</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dispatch-Group"><span class="nav-number">4.</span> <span class="nav-text">Dispatch Group</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»»å‹™éå­åŸ·è¡Œç·’"><span class="nav-number">4.1.</span> <span class="nav-text">ä»»å‹™éå­åŸ·è¡Œç·’</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WorkItem"><span class="nav-number">5.</span> <span class="nav-text">WorkItem</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»»å‹™æ˜¯å­åŸ·è¡Œç·’"><span class="nav-number">5.1.</span> <span class="nav-text">ä»»å‹™æ˜¯å­åŸ·è¡Œç·’</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åƒè€ƒæ–‡ä»¶"><span class="nav-number">6.</span> <span class="nav-text">åƒè€ƒæ–‡ä»¶</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bing</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
